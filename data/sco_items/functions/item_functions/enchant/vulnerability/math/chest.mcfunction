#>sco_items:item_functions/enchant/vulnerability/math/chest
#@within sco_items:item_functions/enchant/vulnerability/hurt

data modify storage _ _ set from entity @s Inventory[{Slot:102b}].tag.item_functions.enchant[{id:"vulnerability"}].memory
execute store success score # _ run data modify storage _ _ set from entity @s Inventory[{Slot:102b}].tag.Damage
execute if score # _ matches 0 run return 0

execute store result score # _ run data get storage _ _
execute store result score #_ _ run data get entity @s Inventory[{Slot:102b}].tag.item_functions.enchant[{id:"vulnerability"}].lvl 5
execute store result storage _ _ int 1 run scoreboard players operation # _ += #_ _
tellraw @a {"score":{"name": "#","objective": "_"}}
item modify entity @s armor.chest set_damage
data modify storage _ data_fetch.id set from entity @s Inventory[{Slot:102b}].id
data modify storage _ data_fetch.tag set from entity @s Inventory[{Slot:102b}].tag
execute if data entity @s Inventory[{Slot:102b}].tag run data modify storage _ data_fetch.tag set value ""
execute store result score #damage_data _ run function item/damage_data
execute if score # _ >= #damage_data _ run item modify entity @s armor.chest delete
execute if score # _ >= #damage_data _ positioned ~ ~1 ~ run function item/particle/break with storage _ data_fetch
execute if score # _ >= #damage_data _ run return run playsound entity.item.break player @a ~ ~ ~ 0.8 1
data modify storage _ _ set from entity @s Inventory[{Slot:102b}].tag.Damage
item modify entity @s armor.chest sco_items:item_functions/enchant/vulnerability/math/memory